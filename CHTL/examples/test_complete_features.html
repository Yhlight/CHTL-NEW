<html>
<head>
    <meta charset="UTF-8">
</head>
<body>
    <script>
// 完整功能测试
// 测试所有CHTL语法特征

// 1. 配置组
[Configuration]
{
    DEBUG_MODE = true;
    DISABLE_STYLE_AUTO_ADD_CLASS = false;
    DISABLE_STYLE_AUTO_ADD_ID = false;
    INDEX_INITIAL_COUNT = 1;
    OPTION_COUNT = 5;
}

// 2. 命名空间
[Namespace] TestSpace
{
    // 3. 模板定义 - 带继承
    [Template] @Style BaseStyle
    {
        color: #333;
        font-size: 14px;
    }
    
    [Template] @Style ExtendedStyle
    {
        inherit @Style BaseStyle;
        background: white;
        padding: 10px;
    }
    
    // 4. 无值样式组
    [Custom] @Style FlexStyle
    {
        display,
        flex-direction,
        justify-content;
    }
    
    // 5. 模板元素
    [Template] @Element Card
    {
        div
        {
            class: card;
            style
            {
                @Style ExtendedStyle;
                border: 1px solid #ddd;
            }
        }
    }
    
    // 6. 变量组
    [Template] @Var Colors
    {
        primary: "#007bff";
        secondary: "#6c757d";
        danger: "#dc3545";
    }
}

// 7. 使用声明
use html5;

// 8. 导入测试（注释掉避免实际导入）
// [Import] @Chtl from test_module;
// [Import] [Template] @Style from another.chtl;
// [Import] @Html from "index.html" as mainContent;

// 9. 原始嵌入
[Origin] @Style globalStyles
{
    body {
        margin: 0;
        padding: 0;
    }
}

[Origin] @JavaScript init
{
    console.log("CHTL Complete Test");
}

// 10. 自定义原始嵌入
[Origin] @Vue vueComponent
{
    <div class="vue-app">
        {{ message }}
    </div>
}

// 11. 主内容
html
{
    head
    {
        title: "CHTL完整功能测试";
        meta
        {
            charset: "UTF-8";
        }
    }
    
    body
    {
        // 12. 约束测试
        div
        {
            except span, @Html;  // 禁止使用span和HTML元素
            
            // 13. 使用模板元素
            @Element Card from TestSpace;
            
            // 14. 元素特例化
            @Element Card from TestSpace
            {
                // 删除某些内容
                delete div;
                
                // 插入新内容
                insert after .card
                {
                    span
                    {
                        text { "额外内容" }
                    }
                }
            }
        }
        
        // 15. 局部样式测试
        div
        {
            id: testDiv;
            
            style
            {
                // 内联样式
                background: Colors(primary);  // 变量引用
                padding: 20px;
                
                // 类选择器（自动添加）
                .auto-class
                {
                    color: red;
                }
                
                // ID选择器
                #testDiv
                {
                    border: 2px solid blue;
                }
                
                // 伪类选择器
                &:hover
                {
                    background: Colors(secondary = "#f0f0f0");  // 变量特例化
                }
                
                // 伪元素选择器
                &::before
                {
                    content: "→";
                }
            }
            
            // 16. 文本节点
            text
            {
                "这是一个测试"
            }
            
            // 17. 注释测试
            // 普通注释，不会出现在输出中
            /* 多行注释
               也不会出现在输出中 */
            -- 生成器注释，会出现在输出中
        }
        
        // 18. 自定义样式使用
        div
        {
            style
            {
                @Style FlexStyle from TestSpace
                {
                    display: flex;
                    flex-direction: row;
                    justify-content: center;
                }
            }
        }
        
        // 19. 局部脚本
        script
        {
            -- 这会生成为JS注释
            console.log("Local script");
        }
    }
}    </script>
</body>
</html>