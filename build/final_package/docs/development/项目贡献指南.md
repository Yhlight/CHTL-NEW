# CHTL项目贡献指南

## 🤝 欢迎贡献

感谢您对CHTL (Chtholly HyperText Language) 项目的关注！CHTL是一个开源的超文本语言编译器项目，我们热烈欢迎社区的贡献。无论您是想修复Bug、添加新功能、改进文档，还是分享使用经验，都非常欢迎！

---

## 🌟 项目价值观

### 🎭 角色化设计理念

CHTL项目具有独特的角色化设计理念：
- **珂朵莉·诺塔·塞尼欧里斯** - 代表温柔、强大、牺牲精神
- **由比滨结衣** - 代表活泼、理解、真诚友善

### 💎 技术价值观

- **优雅简洁** - 代码应该美观且易读
- **强大灵活** - 功能应该强大且可扩展  
- **用户友好** - 工具应该易用且直观
- **质量至上** - 代码应该稳定且高效
- **创新精神** - 勇于尝试新技术和新理念

---

## 🚀 贡献方式

### 💻 代码贡献

#### 🐛 Bug修复
1. **报告Bug** - 在Issues中详细描述问题
2. **重现问题** - 提供最小可重现示例
3. **修复代码** - 遵循项目编码规范
4. **测试验证** - 确保修复不引入新问题
5. **提交PR** - 详细说明修复内容

#### ✨ 新功能开发
1. **功能提案** - 先在Issues中讨论功能需求
2. **设计文档** - 编写功能设计和API文档
3. **实现代码** - 按照设计文档实现功能
4. **完整测试** - 编写单元测试和集成测试
5. **文档更新** - 更新相关文档和示例

### 📚 文档贡献

#### 📖 文档改进
- **修正错误** - 修复文档中的错误和不准确信息
- **补充内容** - 添加缺失的说明和示例
- **改进表达** - 让文档更清晰易懂
- **翻译工作** - 提供其他语言版本的文档

#### 📝 教程创作
- **入门教程** - 帮助新用户快速上手
- **高级教程** - 深入介绍复杂功能
- **最佳实践** - 分享实际项目经验
- **案例研究** - 详细的应用案例分析

### 🧪 测试贡献

#### 🔬 测试用例
- **单元测试** - 为新功能编写测试
- **集成测试** - 测试组件间的协作
- **性能测试** - 验证性能要求
- **兼容性测试** - 跨平台兼容性验证

#### 🐛 质量保证
- **回归测试** - 防止功能退化
- **边界测试** - 测试极端情况
- **压力测试** - 验证系统稳定性
- **用户体验测试** - 验证易用性

---

## 📋 贡献流程

### 🔄 标准流程

#### 1. 准备阶段
```bash
# 1. Fork项目到您的GitHub账户
# 2. 克隆您的Fork
git clone https://github.com/YourUsername/chtl-compiler.git
cd chtl-compiler

# 3. 添加上游仓库
git remote add upstream https://github.com/CHTL-Official/chtl-compiler.git

# 4. 创建开发分支
git checkout -b feature/my-new-feature
```

#### 2. 开发阶段
```bash
# 1. 同步最新代码
git fetch upstream
git rebase upstream/main

# 2. 进行开发工作
# (编写代码、测试、文档)

# 3. 提交更改
git add .
git commit -m "feat: add new awesome feature"

# 4. 推送到您的Fork
git push origin feature/my-new-feature
```

#### 3. 提交阶段
1. **创建Pull Request** - 在GitHub上创建PR
2. **填写PR模板** - 详细描述更改内容
3. **代码审查** - 等待维护者审查
4. **修改完善** - 根据反馈进行修改
5. **合并** - PR被接受后合并到主分支

### 📝 提交信息规范

#### 提交信息格式
```
<类型>(<范围>): <描述>

<详细说明>

<相关Issue>
```

#### 提交类型
- **feat**: 新功能
- **fix**: Bug修复
- **docs**: 文档更新
- **style**: 代码格式调整
- **refactor**: 代码重构
- **perf**: 性能优化
- **test**: 测试相关
- **build**: 构建系统更改
- **ci**: CI配置更改
- **chore**: 其他更改

#### 示例
```bash
# 新功能
git commit -m "feat(cjmod): add printMylove image processing feature

Implement advanced image to ASCII/pixel conversion with romantic themes.
Support for multiple output formats and animation effects.

Closes #123"

# Bug修复
git commit -m "fix(parser): resolve template inheritance issue

Fix template inheritance chain resolution when multiple inheritance
is used with namespaced templates.

Fixes #456"

# 文档更新
git commit -m "docs(cjmod): add comprehensive CJMOD development guide

Add detailed documentation for CJMOD API usage, examples, and best practices.
Include Chtholly module usage examples.

Related to #789"
```

---

## 🎯 贡献领域

### 🔥 核心编译器

#### 优先级贡献领域
1. **CJMOD扩展** - 新的CJMOD功能和API
2. **性能优化** - 编译速度和内存使用优化
3. **错误处理** - 更好的错误信息和恢复机制
4. **语法扩展** - 新的CHTL语法特征
5. **跨平台支持** - 更好的平台兼容性

#### 技术要求
- **C++17熟练** - 现代C++特性使用
- **编译器原理** - 词法分析、语法解析、代码生成
- **ANTLR4经验** - 语法解析框架
- **UTF-8处理** - 国际化字符处理
- **性能优化** - 算法和数据结构优化

### 💻 VSCode插件

#### 贡献机会
1. **语法高亮** - 改进CHTL/CHTL JS语法高亮
2. **智能提示** - 增强代码补全功能
3. **调试支持** - 实时错误检测和提示
4. **重构工具** - 代码重构和格式化
5. **实时预览** - 改进预览功能

#### 技术要求
- **TypeScript** - 插件开发语言
- **VSCode API** - 扩展开发接口
- **Web技术** - HTML、CSS、JavaScript
- **Node.js** - 服务器端开发

### 📦 模块生态

#### 官方模块贡献
1. **珂朵莉模块** - 扩展珂朵莉主题组件
2. **由比滨模块** - 添加由比滨互动功能
3. **新角色模块** - 基于其他动漫角色的模块
4. **通用模块** - 实用的通用组件库

#### 社区模块
1. **主题模块** - 各种设计风格的主题
2. **组件库** - 可重用的UI组件
3. **工具模块** - 开发辅助工具
4. **特效模块** - 动画和视觉效果

---

## 🛠️ 开发环境设置

### 🔧 环境配置

#### 基础要求
```bash
# 1. 克隆仓库
git clone https://github.com/YourUsername/chtl-compiler.git
cd chtl-compiler

# 2. 安装依赖
./scripts/install_dependencies_linux.sh  # Linux
./scripts/install_dependencies_macos.sh  # macOS
# Windows: 参考环境依赖文档

# 3. 构建项目
./scripts/linux/build_debug.sh

# 4. 运行测试
./build/debug/bin/chtl_end_to_end_test
```

#### 开发工具
```bash
# 推荐的开发工具
# 1. IDE: Visual Studio Code, CLion, Visual Studio
# 2. 调试: GDB, LLDB, Visual Studio Debugger
# 3. 性能分析: Valgrind, Perf, Intel VTune
# 4. 代码格式化: clang-format
# 5. 静态分析: clang-tidy, cppcheck
```

### 📋 开发规范

#### 代码风格
```cpp
// C++ 代码风格
namespace CHTL {

/**
 * 类名使用PascalCase
 */
class CHTLCompiler {
public:
    /**
     * 公共方法使用PascalCase
     * @param sourceCode 源代码
     * @return 编译结果
     */
    bool Compile(const std::string& sourceCode);
    
    /**
     * 获取错误信息
     * @return 错误信息列表
     */
    std::vector<std::string> GetErrors() const;

private:
    /**
     * 私有成员使用m_前缀 + PascalCase
     */
    std::string m_SourceCode;
    std::vector<std::string> m_Errors;
    
    /**
     * 私有方法使用PascalCase
     */
    bool ParseSourceCode();
};

} // namespace CHTL
```

#### 注释规范
```cpp
/**
 * 类和函数使用Doxygen风格注释
 * @brief 简短描述
 * @param paramName 参数说明
 * @return 返回值说明
 * @throws ExceptionType 异常说明
 * @since 版本号
 * @see 相关引用
 */

// 单行注释说明代码逻辑
// 使用中文注释，便于理解

/* 
 * 多行注释用于复杂逻辑说明
 * 或临时禁用代码块
 */
```

---

## 🧪 测试指南

### ✅ 测试要求

#### 单元测试
```cpp
// 测试文件命名: ComponentNameTest.cpp
#include "gtest/gtest.h"
#include "../CHTL/CHTLLexer/CHTLLexer.h"

class CHTLLexerTest : public ::testing::Test {
protected:
    void SetUp() override {
        lexer = std::make_unique<CHTL::CHTLLexer>();
    }
    
    std::unique_ptr<CHTL::CHTLLexer> lexer;
};

TEST_F(CHTLLexerTest, TokenizeBasicElement) {
    std::string code = "div { class = \"test\" }";
    auto tokens = lexer->Tokenize(code);
    
    ASSERT_FALSE(tokens.empty());
    EXPECT_EQ(tokens[0].Type, CHTL::TokenType::IDENTIFIER);
    EXPECT_EQ(tokens[0].Value, "div");
}

TEST_F(CHTLLexerTest, HandleUTF8Characters) {
    std::string code = "text { \"测试中文字符\" }";
    auto tokens = lexer->Tokenize(code);
    
    // 验证UTF-8字符正确处理
    bool foundChineseText = false;
    for (const auto& token : tokens) {
        if (token.Value.find("测试中文字符") != std::string::npos) {
            foundChineseText = true;
            break;
        }
    }
    
    EXPECT_TRUE(foundChineseText);
}
```

#### 集成测试
```cpp
// 集成测试示例
TEST(CJMODIntegrationTest, FullWorkflow) {
    // 1. 创建CJMOD管理器
    CJMOD::CJMODManager manager;
    ASSERT_TRUE(manager.Initialize(nullptr, nullptr, nullptr));
    
    // 2. 处理包含CJMOD功能的代码
    std::string testCode = "printMylove { target: 'world', message: 'test' }";
    std::string processed = manager.ProcessCodeFragment(testCode, 0);
    
    // 3. 验证处理结果
    ASSERT_FALSE(processed.empty());
    EXPECT_TRUE(processed.find("CJMOD Export Result") != std::string::npos);
    
    // 4. 验证功能正确性
    EXPECT_TRUE(processed.find("printMylove") != std::string::npos);
    EXPECT_TRUE(processed.find("world") != std::string::npos);
}
```

### 📊 测试覆盖率

#### 覆盖率要求
- **核心功能**: 90%+ 覆盖率
- **CJMOD API**: 95%+ 覆盖率
- **新功能**: 100% 覆盖率
- **Bug修复**: 必须包含回归测试

#### 覆盖率检查
```bash
# 生成覆盖率报告
cmake .. -DWITH_COVERAGE=ON
make coverage
open coverage/index.html
```

---

## 📚 文档贡献

### 📖 文档类型

#### 技术文档
1. **API文档** - 详细的接口说明
2. **架构文档** - 系统设计和架构说明
3. **开发指南** - 开发流程和最佳实践
4. **故障排除** - 常见问题和解决方案

#### 用户文档
1. **使用指南** - 用户使用手册
2. **教程文档** - 分步骤的学习教程
3. **示例代码** - 实际应用示例
4. **FAQ文档** - 常见问题解答

### ✍️ 文档规范

#### 中文文档规范
```markdown
# 文档标题

## 🎯 概述
简洁明确的概述，使用合适的emoji增强可读性。

### 📋 子标题
详细内容说明，保持逻辑清晰。

#### 具体功能
```代码示例
// 代码注释使用中文
function example() {
    // 功能说明
}
```

**重要提示**: 使用粗体强调关键信息
*斜体*: 用于术语或特殊说明

- 列表项目1
- 列表项目2
  - 子项目

1. 有序列表
2. 步骤说明

> 引用重要信息或注意事项

---

## 🎊 总结
简洁的总结，回顾要点。
```

---

## 🎨 设计贡献

### 🎭 UI/UX设计

#### 设计原则
1. **角色化设计** - 体现角色特色
2. **用户友好** - 直观易用的界面
3. **一致性** - 保持设计风格统一
4. **响应式** - 适配不同设备
5. **无障碍** - 考虑可访问性需求

#### 设计资产
- **图标设计** - 项目相关图标
- **插图设计** - 文档和界面插图
- **主题设计** - 新的视觉主题
- **动画设计** - 交互动画效果

### 🎨 视觉资源

#### 角色相关设计
- **珂朵莉主题** - 红发翠眼的温柔风格
- **由比滨主题** - 粉色活泼的友好风格
- **新角色主题** - 其他动漫角色的设计

---

## 🔍 代码审查指南

### 👀 审查清单

#### 功能审查
- [ ] 功能是否按需求正确实现
- [ ] 是否处理了边界情况和错误情况
- [ ] 是否与现有功能兼容
- [ ] 是否遵循项目架构设计

#### 代码质量审查
- [ ] 代码是否遵循项目编码规范
- [ ] 是否有充分的注释和文档
- [ ] 是否有相应的测试用例
- [ ] 是否存在潜在的性能问题

#### 安全审查
- [ ] 是否存在内存泄漏风险
- [ ] 是否正确处理用户输入
- [ ] 是否有缓冲区溢出风险
- [ ] 是否遵循安全编码最佳实践

### 💬 审查反馈

#### 建设性反馈
```markdown
## 代码审查反馈

### ✅ 优点
- 功能实现完整，逻辑清晰
- 代码风格符合项目规范
- 测试覆盖率良好

### 🔧 建议改进
1. **性能优化**
   - 建议在第123行使用`std::move`避免不必要的拷贝
   - 考虑使用`reserve()`预分配容器空间

2. **错误处理**
   - 建议在第456行添加输入验证
   - 考虑使用异常安全的RAII模式

3. **代码可读性**
   - 建议为复杂算法添加更详细的注释
   - 考虑将长函数拆分为更小的函数

### 📚 参考资料
- [CHTL编码规范](coding-standards.md)
- [CJMOD开发指南](CJMOD开发指南.md)
```

---

## 🎯 专项贡献

### 🌸 珂朵莉模块贡献

#### 贡献方向
1. **新组件开发** - 基于珂朵莉特色的UI组件
2. **CJMOD功能** - printMylove、iNeverAway等功能增强
3. **主题完善** - 珂朵莉风格的视觉主题
4. **交互效果** - 体现守护精神的交互设计

#### 设计要求
```chtl
// 珂朵莉模块设计要求
[Template]
<ChthollyComponent> {
    // 1. 使用珂朵莉色彩方案
    $hair-red: #ff6b6b;      // 红发色
    $eye-green: #4ecdc4;     // 翠绿眼睛色
    $warm-yellow: #ffd93d;   // 温暖黄色
    
    // 2. 体现温柔特质
    border-radius: 12px;     // 圆润边角
    box-shadow: 0 4px 20px rgba(255, 107, 107, 0.2);  // 柔和阴影
    transition: all 0.3s ease;  // 平滑过渡
    
    // 3. 保护性交互
    &:hover {
        transform: translateY(-2px);  // 轻柔上浮
    }
}
```

### 🎀 由比滨模块贡献

#### 贡献方向
1. **社交组件** - 友好的用户交互组件
2. **情感识别** - 智能情感分析功能
3. **记录系统** - 备忘录和日记功能
4. **友情主题** - 体现友情的设计元素

#### 设计要求
```chtl
// 由比滨模块设计要求
[Template]
<YuigahamaComponent> {
    // 1. 使用由比滨色彩方案
    $yui-pink: #ff69b4;      // 活泼粉色
    $warm-orange: #ffa726;   // 温暖橙色
    $friendly-blue: #42a5f5; // 友善蓝色
    
    // 2. 体现活泼特质
    background: linear-gradient(135deg, #fff0f5, #ffe4e1);
    border: 2px solid $yui-pink;
    
    // 3. 友好交互
    cursor: pointer;
    &:hover {
        background: linear-gradient(135deg, #ffe8f5, #ffd9e1);
    }
}
```

---

## 🏆 贡献者认可

### 🌟 贡献者等级

#### 🥉 铜牌贡献者
- **要求**: 1-5个有效PR
- **权益**: 
  - 贡献者列表显示
  - 项目贴纸
  - 社区Discord访问

#### 🥈 银牌贡献者  
- **要求**: 6-20个有效PR或重要功能贡献
- **权益**:
  - 所有铜牌权益
  - 代码审查权限
  - 技术讨论参与
  - 特殊贡献者徽章

#### 🥇 金牌贡献者
- **要求**: 20+个有效PR或核心功能贡献
- **权益**:
  - 所有银牌权益
  - 项目方向讨论参与
  - 发布决策参与
  - 年度贡献者奖励

#### 💎 核心贡献者
- **要求**: 长期活跃贡献和卓越技术贡献
- **权益**:
  - 所有金牌权益
  - 项目维护权限
  - 技术决策参与
  - 官方团队邀请

### 🎊 特殊认可

#### 角色化贡献认可
- **珂朵莉守护者** - 为珂朵莉模块做出重要贡献
- **由比滨友情使者** - 为由比滨模块做出重要贡献
- **CJMOD大师** - 为CJMOD系统做出卓越贡献
- **架构师** - 为项目架构做出重要贡献

---

## 📋 贡献检查清单

### ✅ 提交前检查

#### 代码质量
- [ ] 代码遵循项目编码规范
- [ ] 所有编译器警告已解决
- [ ] 通过静态分析检查
- [ ] 内存泄漏检查通过

#### 功能完整性
- [ ] 新功能完整实现
- [ ] 所有测试用例通过
- [ ] 边界情况处理正确
- [ ] 错误处理完善

#### 文档完整性
- [ ] API文档已更新
- [ ] 使用示例已提供
- [ ] 更改日志已更新
- [ ] 相关文档已同步

#### 兼容性
- [ ] 向后兼容性保持
- [ ] 跨平台编译通过
- [ ] 性能回归测试通过
- [ ] 依赖关系正确

---

## 🎯 特殊贡献机会

### 🔥 高优先级需求

1. **CJMOD扩展开发**
   - 新的官方模块
   - CJMOD API增强
   - 性能优化

2. **VSCode插件增强**
   - 实时预览改进
   - 智能提示增强
   - 调试功能完善

3. **文档完善**
   - 教程视频制作
   - 多语言文档
   - 示例项目

4. **社区建设**
   - 论坛管理
   - 用户支持
   - 推广宣传

### 🌟 创新贡献

1. **新语言特征** - 提出并实现新的CHTL语法
2. **性能突破** - 编译器性能的重大优化
3. **工具创新** - 开发辅助工具和IDE插件
4. **生态建设** - 构建CHTL开发生态

---

## 📞 联系方式

### 💬 社区交流

#### GitHub
- **主仓库**: https://github.com/CHTL-Official/chtl-compiler
- **Issues**: 报告问题和功能请求
- **Discussions**: 技术讨论和问答
- **Wiki**: 社区维护的知识库

#### 开发者交流
- **Discord**: CHTL开发者社区 (邀请链接)
- **QQ群**: CHTL中文开发者群
- **微信群**: CHTL技术交流群
- **邮件列表**: chtl-dev@example.com

### 📧 联系维护者

#### 核心团队
- **项目负责人**: @project-lead
- **CJMOD负责人**: @cjmod-maintainer
- **文档负责人**: @docs-maintainer
- **社区管理**: @community-manager

---

## 🎉 感谢贡献者

### 🌟 致谢名单

感谢所有为CHTL项目贡献力量的开发者、设计师、文档作者和社区成员！

#### 核心贡献者
- **@contributor1** - CJMOD系统架构师
- **@contributor2** - VSCode插件开发者
- **@contributor3** - 文档体系建设者
- **@contributor4** - 性能优化专家

#### 特殊贡献
- **@designer1** - 珂朵莉模块设计师
- **@designer2** - 由比滨模块设计师
- **@translator1** - 多语言文档翻译
- **@tester1** - 质量保证专家

### 💝 贡献价值

每一个贡献都是宝贵的：
- **代码贡献** - 让CHTL更强大
- **文档贡献** - 让CHTL更易用
- **测试贡献** - 让CHTL更稳定
- **设计贡献** - 让CHTL更美观
- **社区贡献** - 让CHTL更温暖

---

## 🎊 总结

CHTL项目欢迎所有形式的贡献：

- 🔥 **代码贡献** - 核心功能、CJMOD扩展、工具开发
- 🔥 **文档贡献** - 技术文档、教程、翻译
- 🔥 **测试贡献** - 质量保证、性能测试
- 🔥 **设计贡献** - UI设计、角色主题、视觉资源
- 🔥 **社区贡献** - 用户支持、推广宣传

通过您的贡献，CHTL将变得更加强大、易用、美观。让我们一起构建一个充满爱意和技术创新的开源项目！

**🌸 加入CHTL贡献者大家庭，让珂朵莉和由比滨的精神在代码中传承！**