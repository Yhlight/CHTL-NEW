;; ç”±æ¯”æ»¨ç»“è¡£CMODä¸»æ¨¡å—æ–‡ä»¶
;; ä¸¥æ ¼æŒ‰ç…§CHTLè¯­æ³•æ–‡æ¡£çš„CMODæ ‡å‡†æ ¼å¼
;; åŒ…å«ç”±æ¯”æ»¨ç»“è¡£ä¸»é¢˜çš„æ‰€æœ‰CHTLç»„ä»¶

;; ç”±æ¯”æ»¨ç»“è¡£ä¸»é¢˜è‰²å½©å˜é‡ç»„
[Custom] @Var YuigahamaColors
{
    primary-pink = "#FFB6C1";        // ç”±æ¯”æ»¨ç»“è¡£çš„ç²‰è‰²é•¿å‘
    warm-coral = "#FFC0CB";          // æ¸©æš–çš„çŠç‘šè‰²
    soft-peach = "#FFEBE9";          // æŸ”å’Œçš„æ¡ƒè‰²
    gentle-white = "#FFF0F5";        // æ¸©æŸ”çš„ç™½è‰²
    light-gray = "#F8F8F8";          // æµ…ç°è‰²
}

;; ç”±æ¯”æ»¨ç»“è¡£å­—ä½“å˜é‡ç»„
[Custom] @Var YuigahamaFonts
{
    primary-font = "Microsoft YaHei, Hiragino Sans GB, Arial, sans-serif";
    title-font = "Georgia, serif";
    cute-font = "Comic Sans MS, cursive";
}

;; ç”±æ¯”æ»¨ç»“è¡£é—´è·å˜é‡ç»„
[Custom] @Var YuigahamaSpacing
{
    tiny = "4px";
    small = "8px";
    medium = "16px";
    large = "24px";
    xlarge = "32px";
}

;; ç”±æ¯”æ»¨ç»“è¡£éŸ³ä¹æ’­æ”¾å™¨æ¨¡æ¿å…ƒç´ 
[Template] @Element YuigahaMusicPlayer
{
    div
    {
        class: yuigahama-music-player;
        
        style
        {
            .yuigahama-music-player
            {
                background: linear-gradient(135deg, @Var YuigahamaColors.primary-pink 0%, @Var YuigahamaColors.warm-coral 50%, @Var YuigahamaColors.soft-peach 100%);
                border-radius: 20px;
                padding: @Var YuigahamaSpacing.large;
                box-shadow: 0 8px 25px rgba(255, 182, 193, 0.4);
                border: 2px solid @Var YuigahamaColors.primary-pink;
                max-width: 350px;
                margin: @Var YuigahamaSpacing.large auto;
                font-family: @Var YuigahamaFonts.primary-font;
                position: relative;
                overflow: hidden;
            }
            
            .player-header
            {
                text-align: center;
                margin-bottom: @Var YuigahamaSpacing.medium;
                color: #8B4B8B;
                font-weight: bold;
                font-size: 18px;
            }
            
            .player-display
            {
                background: rgba(255, 255, 255, 0.8);
                border-radius: 12px;
                padding: @Var YuigahamaSpacing.medium;
                margin-bottom: @Var YuigahamaSpacing.medium;
                text-align: center;
                color: #8B4B8B;
                min-height: 60px;
                display: flex;
                align-items: center;
                justify-content: center;
                flex-direction: column;
            }
            
            .track-title
            {
                font-weight: bold;
                margin-bottom: @Var YuigahamaSpacing.tiny;
            }
            
            .track-artist
            {
                font-size: 12px;
                opacity: 0.8;
            }
            
            .player-controls
            {
                display: flex;
                justify-content: center;
                gap: @Var YuigahamaSpacing.medium;
                margin-bottom: @Var YuigahamaSpacing.medium;
            }
            
            .control-btn
            {
                background: linear-gradient(45deg, #FF69B4, @Var YuigahamaColors.primary-pink);
                border: none;
                border-radius: 50%;
                width: 45px;
                height: 45px;
                color: white;
                font-size: 18px;
                cursor: pointer;
                transition: all 0.3s ease;
                box-shadow: 0 4px 8px rgba(255, 105, 180, 0.3);
            }
            
            .control-btn:hover
            {
                transform: translateY(-2px);
                box-shadow: 0 6px 12px rgba(255, 105, 180, 0.4);
            }
        }
        
        script
        {
            ;; ç”±æ¯”æ»¨ç»“è¡£éŸ³ä¹æ’­æ”¾å™¨é€»è¾‘
            console.log('ğŸŒ¸ é›…å“ˆå–½ï½ç”±æ¯”æ»¨ç»“è¡£çš„éŸ³ä¹æ’­æ”¾å™¨å¯åŠ¨ï¼');
            
            const player = {{.yuigahama-music-player}};
            let isPlaying = false;
            
            ;; åˆ›å»ºæ’­æ”¾å™¨ç•Œé¢
            const header = player.querySelector('.player-header') || (() => {
                const h = document.createElement('div');
                h.className = 'player-header';
                h.textContent = 'ğŸµ é›…å“ˆå–½éŸ³ä¹æ’­æ”¾å™¨ ğŸµ';
                player.appendChild(h);
                return h;
            })();
            
            const display = player.querySelector('.player-display') || (() => {
                const d = document.createElement('div');
                d.className = 'player-display';
                d.innerHTML = '<div class="track-title">é’æ˜¥æ‹çˆ±ç‰©è¯­</div><div class="track-artist">ç”±æ¯”æ»¨ç»“è¡£</div>';
                player.appendChild(d);
                return d;
            })();
            
            const controls = player.querySelector('.player-controls') || (() => {
                const c = document.createElement('div');
                c.className = 'player-controls';
                c.innerHTML = '<button class="control-btn">â®</button><button class="control-btn play-pause">â–¶</button><button class="control-btn">â­</button>';
                player.appendChild(c);
                return c;
            })();
            
            ;; æ’­æ”¾æ§åˆ¶é€»è¾‘
            {{.play-pause}} &-> click {
                isPlaying = !isPlaying;
                this.textContent = isPlaying ? 'â¸' : 'â–¶';
                console.log('ğŸ¶ ' + (isPlaying ? 'å¼€å§‹æ’­æ”¾' : 'æš‚åœæ’­æ”¾'));
            };
            
            ;; å¯¼å‡ºæ§åˆ¶æ¥å£
            window.YuigahamaPlayer = {
                play: () => { isPlaying = true; console.log('ğŸµ é›…å“ˆå–½ï½å¼€å§‹æ’­æ”¾ï¼'); },
                pause: () => { isPlaying = false; console.log('â¸ï¸ æš‚åœæ’­æ”¾ï½'); }
            };
        }
        
        div
        {
            class: player-header;
        }
        
        div
        {
            class: player-display;
        }
        
        div
        {
            class: player-controls;
        }
    }
}

;; ç”±æ¯”æ»¨ç»“è¡£æ‰‹é£ç´æ¨¡æ¿å…ƒç´ 
[Template] @Element YuigahamaAccordion
{
    div
    {
        class: yuigahama-accordion;
        
        style
        {
            .yuigahama-accordion
            {
                border: 2px solid @Var YuigahamaColors.primary-pink;
                border-radius: 15px;
                overflow: hidden;
                box-shadow: 0 6px 20px rgba(255, 182, 193, 0.3);
                background: linear-gradient(135deg, @Var YuigahamaColors.gentle-white 0%, @Var YuigahamaColors.soft-peach 100%);
                margin: @Var YuigahamaSpacing.medium 0;
                font-family: @Var YuigahamaFonts.primary-font;
            }
            
            .accordion-header
            {
                background: linear-gradient(45deg, @Var YuigahamaColors.primary-pink, @Var YuigahamaColors.warm-coral);
                color: #8B4B8B;
                padding: @Var YuigahamaSpacing.large;
                cursor: pointer;
                transition: all 0.3s ease;
                font-weight: bold;
                position: relative;
                display: flex;
                align-items: center;
                justify-content: space-between;
            }
            
            .accordion-header:hover
            {
                background: linear-gradient(45deg, #FF91A4, @Var YuigahamaColors.primary-pink);
                transform: translateY(-1px);
            }
            
            .accordion-content
            {
                padding: 0 @Var YuigahamaSpacing.large;
                background: @Var YuigahamaColors.light-gray;
                max-height: 0;
                overflow: hidden;
                transition: all 0.4s ease;
            }
            
            .accordion-content.active
            {
                max-height: 600px;
                padding: @Var YuigahamaSpacing.large;
            }
        }
        
        script
        {
            ;; ç”±æ¯”æ»¨ç»“è¡£æ‰‹é£ç´äº¤äº’é€»è¾‘
            console.log('ğŸŒ¸ é›…å“ˆå–½ï½ç”±æ¯”æ»¨ç»“è¡£çš„æ‰‹é£ç´å‡†å¤‡å°±ç»ªï¼');
            
            {{.accordion-header}} &-> click {
                const isActive = this.classList.contains('active');
                
                console.log(isActive ? 'ğŸ‘‹ å†è§ï½æ”¶èµ·å†…å®¹ï¼' : 'ğŸµ é›…å“ˆå–½ï½å±•å¼€å†…å®¹ï¼');
                
                this.classList.toggle('active');
                this.nextElementSibling.classList.toggle('active');
            };
        }
        
        div
        {
            class: accordion-header;
            @Title
        }
        
        div
        {
            class: accordion-content;
            @Content
        }
    }
}