;; ç‚æœµè‰CMODä¸»æ¨¡å—æ–‡ä»¶
;; ä¸¥æ ¼æŒ‰ç…§CHTLè¯­æ³•æ–‡æ¡£çš„CMODæ ‡å‡†æ ¼å¼
;; åŒ…å«ç‚æœµè‰ä¸»é¢˜çš„æ‰€æœ‰CHTLç»„ä»¶

;; ç‚æœµè‰ä¸»é¢˜è‰²å½©å˜é‡ç»„
[Custom] @Var ChthollyColors
{
    primary-red = "#FF6B6B";      // ç‚æœµè‰çš„çº¢è‰²é•¿å‘
    emerald-green = "#4ECDC4";    // ç‚æœµè‰çš„ç¿ ç»¿çœ¼çœ¸
    warm-pink = "#FFB6C1";        // æ¸©æš–çš„ç²‰è‰²
    soft-white = "#FFF0F5";       // æŸ”å’Œçš„ç™½è‰²
    gentle-gray = "#F5F5F5";      // æ¸©æŸ”çš„ç°è‰²
}

;; ç‚æœµè‰å­—ä½“å˜é‡ç»„
[Custom] @Var ChthollyFonts
{
    primary-font = "Microsoft YaHei, Arial, sans-serif";
    title-font = "Georgia, serif";
    code-font = "Consolas, Monaco, monospace";
}

;; ç‚æœµè‰é—´è·å˜é‡ç»„
[Custom] @Var ChthollySpacing
{
    small = "8px";
    medium = "16px";
    large = "24px";
    xlarge = "32px";
}

;; ç‚æœµè‰æ‰‹é£ç´æ¨¡æ¿å…ƒç´ 
[Template] @Element ChthollyAccordion
{
    div
    {
        class: chtholly-accordion;
        
        style
        {
            .chtholly-accordion
            {
                border: 2px solid @Var ChthollyColors.primary-red;
                border-radius: 12px;
                overflow: hidden;
                box-shadow: 0 6px 20px rgba(255, 107, 107, 0.3);
                background: linear-gradient(135deg, @Var ChthollyColors.soft-white 0%, @Var ChthollyColors.warm-pink 100%);
                margin: @Var ChthollySpacing.medium 0;
                font-family: @Var ChthollyFonts.primary-font;
            }
            
            .accordion-header
            {
                background: linear-gradient(45deg, @Var ChthollyColors.primary-red, @Var ChthollyColors.emerald-green);
                color: white;
                padding: @Var ChthollySpacing.large;
                cursor: pointer;
                transition: all 0.3s ease;
                font-weight: bold;
                position: relative;
                display: flex;
                align-items: center;
                justify-content: space-between;
            }
            
            .accordion-header:hover
            {
                transform: translateY(-2px);
                box-shadow: 0 4px 12px rgba(255, 107, 107, 0.4);
            }
            
            .accordion-content
            {
                padding: 0 @Var ChthollySpacing.large;
                background: @Var ChthollyColors.gentle-gray;
                max-height: 0;
                overflow: hidden;
                transition: all 0.4s ease;
            }
            
            .accordion-content.active
            {
                max-height: 500px;
                padding: @Var ChthollySpacing.large;
            }
        }
        
        script
        {
            ;; ç‚æœµè‰æ‰‹é£ç´äº¤äº’é€»è¾‘
            {{.accordion-header}} &-> click {
                const header = this;
                const content = header.nextElementSibling;
                const isActive = header.classList.contains('active');
                
                ;; åˆ‡æ¢çŠ¶æ€
                header.classList.toggle('active');
                content.classList.toggle('active');
                
                console.log('ğŸ’– ç‚æœµè‰æ‰‹é£ç´ï¼š', isActive ? 'æ”¶èµ·' : 'å±•å¼€');
            };
        }
        
        div
        {
            class: accordion-header;
            @Title
        }
        
        div
        {
            class: accordion-content;
            @Content
        }
    }
}

;; ç‚æœµè‰æ¨±èŠ±é›¨æ•ˆæœ
[Custom] @Element ChthollySakura
{
    div
    {
        class: chtholly-sakura-container;
        
        style
        {
            .chtholly-sakura-container
            {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                pointer-events: none;
                z-index: 1000;
                overflow: hidden;
            }
            
            .sakura-petal
            {
                position: absolute;
                width: 12px;
                height: 12px;
                background: radial-gradient(circle, @Var ChthollyColors.warm-pink 0%, @Var ChthollyColors.primary-red 100%);
                border-radius: 50% 0 50% 0;
                opacity: 0.8;
                animation: sakuraFall 8s linear infinite;
            }
            
            @keyframes sakuraFall
            {
                0% {
                    transform: translateY(-100px) rotate(0deg);
                    opacity: 0;
                }
                10% {
                    opacity: 0.8;
                }
                90% {
                    opacity: 0.8;
                }
                100% {
                    transform: translateY(calc(100vh + 100px)) rotate(360deg);
                    opacity: 0;
                }
            }
        }
        
        script
        {
            ;; ç‚æœµè‰æ¨±èŠ±é›¨æ•ˆæœè„šæœ¬
            const container = {{.chtholly-sakura-container}};
            
            function createSakuraPetal() {
                const petal = document.createElement('div');
                petal.className = 'sakura-petal';
                petal.style.left = Math.random() * 100 + '%';
                petal.style.animationDuration = (Math.random() * 4 + 6) + 's';
                petal.style.animationDelay = Math.random() * 2 + 's';
                
                container.appendChild(petal);
                
                setTimeout(() => {
                    if (petal.parentElement) {
                        petal.remove();
                    }
                }, 10000);
            }
            
            ;; å¯åŠ¨æ¨±èŠ±é›¨
            console.log('ğŸŒ¸ ç‚æœµè‰çš„æ¨±èŠ±é›¨å¼€å§‹é£˜è½...');
            setInterval(createSakuraPetal, 500);
        }
    }
}

;; ç‚æœµè‰è¿›åº¦æ¡
[Template] @Element ChthollyProgress
{
    div
    {
        class: chtholly-progress;
        
        style
        {
            .chtholly-progress
            {
                width: 100%;
                height: 20px;
                background: @Var ChthollyColors.gentle-gray;
                border-radius: 10px;
                overflow: hidden;
                border: 2px solid @Var ChthollyColors.primary-red;
            }
            
            .progress-bar
            {
                height: 100%;
                background: linear-gradient(45deg, @Var ChthollyColors.primary-red, @Var ChthollyColors.emerald-green);
                width: 0%;
                transition: width 0.5s ease;
                border-radius: 8px;
            }
        }
        
        script
        {
            ;; ç‚æœµè‰è¿›åº¦æ¡é€»è¾‘
            const progressBar = {{.progress-bar}};
            
            window.ChthollyProgress = {
                update: function(percentage) {
                    progressBar.style.width = percentage + '%';
                    console.log('ğŸ’– ç‚æœµè‰è¿›åº¦ï¼š' + percentage + '%');
                }
            };
        }
        
        div
        {
            class: progress-bar;
        }
    }
}