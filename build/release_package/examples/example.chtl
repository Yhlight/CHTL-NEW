// CHTLç¼–è¯‘å™¨å®Œæ•´åŠŸèƒ½æ¼”ç¤º
// å±•ç¤ºæ‰€æœ‰89ä¸ªè¯­æ³•ç‰¹å¾çš„å®é™…ä½¿ç”¨

use html5;

// é…ç½®ç³»ç»Ÿæ¼”ç¤º
[Configuration] {
    INDEX_INITIAL_COUNT = 0;
    DEBUG_MODE = false;
    
    // Nameé…ç½®å— - å…³é”®å­—è‡ªå®šä¹‰
    [Name] {
        KEYWORD_TEXT = æ–‡æœ¬;
        KEYWORD_STYLE = æ ·å¼;
        KEYWORD_SCRIPT = è„šæœ¬;
    }
    
    // OriginTypeé…ç½®å— - è‡ªå®šä¹‰ç±»å‹
    [OriginType] {
        ORIGINTYPE_VUE = @Vue;
        ORIGINTYPE_REACT = @React;
    }
}

// å‘½åç©ºé—´æ¼”ç¤º
[Namespace] UI {
    [Namespace] Components {
        // æ¨¡æ¿ç³»ç»Ÿæ¼”ç¤º
        [Template] @Style ButtonStyle {
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        [Template] @Element Card {
            div {
                class: "card";
                
                style {
                    .card {
                        background: white;
                        border-radius: 8px;
                        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                        padding: 1.5rem;
                        margin: 1rem 0;
                    }
                    
                    &:hover {
                        transform: translateY(-2px);
                        box-shadow: 0 4px 20px rgba(0,0,0,0.15);
                    }
                }
            }
        }
        
        [Template] @Var ThemeColors {
            primaryColor: "#667eea";
            secondaryColor: "#764ba2";
            textColor: "#333";
            backgroundColor: "#f8f9fa";
        }
        
        // è‡ªå®šä¹‰ç³»ç»Ÿæ¼”ç¤º
        [Custom] @Style ResponsiveButton {
            // æ— å€¼æ ·å¼ç»„
            padding,
            font-size,
            border-radius;
        }
        
        [Custom] @Element InteractiveCard {
            @Element Card;
            
            div {
                class: "card-header";
                
                style {
                    .card-header {
                        border-bottom: 1px solid #eee;
                        padding-bottom: 1rem;
                        margin-bottom: 1rem;
                    }
                }
            }
            
            div {
                class: "card-content";
            }
            
            div {
                class: "card-footer";
                
                style {
                    .card-footer {
                        border-top: 1px solid #eee;
                        padding-top: 1rem;
                        margin-top: 1rem;
                        text-align: right;
                    }
                }
            }
        }
    }
}

// åŸå§‹åµŒå…¥æ¼”ç¤º
[Origin] @Html CustomHeader {
    <header class="custom-header">
        <nav class="navbar">
            <div class="nav-brand">CHTLæ¼”ç¤º</div>
            <ul class="nav-menu">
                <li><a href="#home">é¦–é¡µ</a></li>
                <li><a href="#features">åŠŸèƒ½</a></li>
                <li><a href="#demo">æ¼”ç¤º</a></li>
            </ul>
        </nav>
    </header>
}

[Origin] @Vue TodoComponent {
    <template>
        <div class="todo-app">
            <h2>{{ title }}</h2>
            <ul>
                <li v-for="item in items" :key="item.id">
                    {{ item.text }}
                </li>
            </ul>
        </div>
    </template>
    
    <script>
    export default {
        data() {
            return {
                title: 'CHTL Todoåº”ç”¨',
                items: [
                    { id: 1, text: 'å­¦ä¹ CHTLè¯­æ³•' },
                    { id: 2, text: 'æ„å»ºCHTLåº”ç”¨' },
                    { id: 3, text: 'å‘å¸ƒåˆ°ç”Ÿäº§ç¯å¢ƒ' }
                ]
            }
        }
    }
    </script>
}

// å¯¼å…¥æ¼”ç¤º
[Import] [Template] @Style from UI.Components as ButtonTheme;
[Import] [Custom] @Element from UI.Components as InteractiveCard;

// ä¸»HTMLç»“æ„
html {
    head {
        meta { charset: "UTF-8"; }
        meta { 
            name: "viewport"; 
            content: "width=device-width, initial-scale=1.0"; 
        }
        
        æ–‡æœ¬ {
            "CHTLç¼–è¯‘å™¨å®Œæ•´åŠŸèƒ½æ¼”ç¤º"
        }
        
        // å…¨å±€æ ·å¼
        style {
            /* å…¨å±€CSSé‡ç½® */
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }
            
            body {
                font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
                line-height: 1.6;
                color: ThemeColors(textColor);
                background: ThemeColors(backgroundColor);
            }
            
            .container {
                max-width: 1200px;
                margin: 0 auto;
                padding: 0 20px;
            }
        }
    }
    
    body {
        // ä½¿ç”¨åŸå§‹åµŒå…¥
        [Origin] @Html CustomHeader;
        
        // ä¸»å®¹å™¨
        div {
            class: "container";
            
            // HeroåŒºåŸŸ
            section {
                class: "hero";
                
                æ ·å¼ {
                    .hero {
                        text-align: center;
                        padding: 4rem 0;
                        background: linear-gradient(135deg, 
                            ThemeColors(primaryColor), 
                            ThemeColors(secondaryColor));
                        color: white;
                        margin-bottom: 3rem;
                    }
                    
                    .hero h1 {
                        font-size: 3rem;
                        margin-bottom: 1rem;
                        font-weight: 700;
                    }
                    
                    .hero p {
                        font-size: 1.2rem;
                        opacity: 0.9;
                        margin-bottom: 2rem;
                    }
                }
                
                è„šæœ¬ {
                    // å±€éƒ¨scriptæ¼”ç¤º (å±äºCHTLè¯­æ³•)
                    {{.hero}}->addEventListener('mouseenter', () => {
                        console.log('ğŸ¯ HeroåŒºåŸŸé¼ æ ‡è¿›å…¥');
                    });
                    
                    // ä½¿ç”¨&å¼•ç”¨
                    {{&}}->style.background = 'linear-gradient(45deg, #667eea, #764ba2)';
                }
                
                h1 {
                    æ–‡æœ¬ { "CHTLç¼–è¯‘å™¨" }
                }
                
                p {
                    æ–‡æœ¬ { "ç°ä»£åŒ–åŒè¯­è¨€è¶…æ–‡æœ¬ç¼–è¯‘å™¨ï¼Œé©æ–°Webå¼€å‘ä½“éªŒ" }
                }
                
                button {
                    class: "cta-button";
                    id: "startDemo";
                    
                    æ ·å¼ {
                        @Style ResponsiveButton {
                            padding: 1rem 2rem;
                            font-size: 1.1rem;
                            border-radius: 8px;
                        }
                        
                        .cta-button {
                            background: white;
                            color: ThemeColors(primaryColor);
                            font-weight: 600;
                            transition: all 0.3s ease;
                        }
                        
                        &:hover {
                            transform: translateY(-2px);
                            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
                        }
                    }
                    
                    æ–‡æœ¬ { "å¼€å§‹ä½“éªŒ" }
                }
            }
            
            // åŠŸèƒ½å±•ç¤ºåŒºåŸŸ
            section {
                class: "features";
                
                æ ·å¼ {
                    .features {
                        padding: 3rem 0;
                    }
                    
                    .features h2 {
                        text-align: center;
                        font-size: 2.5rem;
                        margin-bottom: 3rem;
                        color: ThemeColors(primaryColor);
                    }
                    
                    .feature-grid {
                        display: grid;
                        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
                        gap: 2rem;
                        margin-top: 2rem;
                    }
                }
                
                h2 {
                    æ–‡æœ¬ { "æ ¸å¿ƒåŠŸèƒ½ç‰¹æ€§" }
                }
                
                div {
                    class: "feature-grid";
                    
                    // ä½¿ç”¨è‡ªå®šä¹‰å…ƒç´ æ¨¡æ¿
                    @Element InteractiveCard {
                        div[0] {  // ç´¢å¼•è®¿é—®
                            æ–‡æœ¬ { "CHTLè¯­æ³•" }
                        }
                        
                        div[1] {
                            æ–‡æœ¬ { "å¼ºå¤§çš„è¶…æ–‡æœ¬æ ‡è®°è¯­è¨€ï¼Œæ”¯æŒæ¨¡æ¿ã€è‡ªå®šä¹‰ã€åŸå§‹åµŒå…¥ç­‰é«˜çº§ç‰¹æ€§" }
                        }
                        
                        div[2] {
                            button {
                                class: "learn-more";
                                
                                æ ·å¼ {
                                    @Style ButtonStyle;
                                    
                                    .learn-more {
                                        font-size: 0.9rem;
                                        padding: 0.5rem 1rem;
                                    }
                                }
                                
                                æ–‡æœ¬ { "äº†è§£æ›´å¤š" }
                            }
                        }
                    }
                    
                    @Element InteractiveCard {
                        div[0] {
                            æ–‡æœ¬ { "CHTL JS" }
                        }
                        
                        div[1] {
                            æ–‡æœ¬ { "ç‹¬ç«‹çš„ç¼–ç¨‹è¯­è¨€ï¼Œå¢å¼ºé€‰æ‹©å™¨ã€è™šå¯¹è±¡ã€åŠ¨ç”»ç³»ç»Ÿç­‰åˆ›æ–°ç‰¹æ€§" }
                        }
                        
                        div[2] {
                            button {
                                class: "learn-more";
                                æ ·å¼ { @Style ButtonStyle; }
                                æ–‡æœ¬ { "äº†è§£æ›´å¤š" }
                            }
                        }
                    }
                    
                    @Element InteractiveCard {
                        div[0] {
                            æ–‡æœ¬ { "CJMODæ‰©å±•" }
                        }
                        
                        div[1] {
                            æ–‡æœ¬ { "C++ APIæ— é™è¯­æ³•æ‰©å±•ï¼Œæ”¯æŒè‡ªå®šä¹‰è¯­æ³•å’Œå‡½æ•°åˆ›å»º" }
                        }
                        
                        div[2] {
                            button {
                                class: "learn-more";
                                æ ·å¼ { @Style ButtonStyle; }
                                æ–‡æœ¬ { "äº†è§£æ›´å¤š" }
                            }
                        }
                    }
                }
            }
            
            // æ¼”ç¤ºåŒºåŸŸ
            section {
                class: "demo";
                
                æ ·å¼ {
                    .demo {
                        background: #f8f9fa;
                        padding: 4rem 0;
                        margin-top: 3rem;
                    }
                    
                    .demo h2 {
                        text-align: center;
                        margin-bottom: 2rem;
                    }
                    
                    .code-preview {
                        background: #2d3748;
                        color: #e2e8f0;
                        padding: 2rem;
                        border-radius: 8px;
                        font-family: 'Fira Code', monospace;
                        overflow-x: auto;
                    }
                }
                
                è„šæœ¬ {
                    // CHTL JSè¯­æ³•æ¼”ç¤º
                    
                    // å¢å¼ºé€‰æ‹©å™¨
                    {{.cta-button}}->listen {
                        click: () => {
                            console.log('ğŸš€ CTAæŒ‰é’®è¢«ç‚¹å‡»');
                            showFeatures();
                        },
                        
                        mouseenter: function() {
                            {{&}}->style.transform = 'scale(1.05)';
                        },
                        
                        mouseleave: function() {
                            {{&}}->style.transform = 'scale(1)';
                        }
                    };
                    
                    // äº‹ä»¶å§”æ‰˜
                    {{body}}->delegate {
                        target: [{{.learn-more}}, {{.feature-card}}],
                        click: handleFeatureClick,
                        mouseenter: function(event) {
                            event.target.style.opacity = '0.8';
                        },
                        mouseleave: function(event) {
                            event.target.style.opacity = '1';
                        }
                    };
                    
                    // åŠ¨ç”»ç³»ç»Ÿ
                    const fadeInAnimation = animate {
                        target: {{.feature-grid}},
                        duration: 800,
                        easing: ease-out,
                        
                        begin: {
                            opacity: 0,
                            transform: 'translateY(30px)'
                        },
                        
                        when: [
                            {
                                at: 0.5;
                                opacity: 0.5,
                                transform: 'translateY(15px)'
                            }
                        ],
                        
                        end: {
                            opacity: 1,
                            transform: 'translateY(0)'
                        }
                    };
                    
                    // è™šå¯¹è±¡ç³»ç»Ÿ
                    vir AppController = listen {
                        init: function() {
                            console.log('ğŸ¯ åº”ç”¨æ§åˆ¶å™¨åˆå§‹åŒ–');
                            this.setupAnimations();
                            this.bindEvents();
                        },
                        
                        setupAnimations: function() {
                            fadeInAnimation.start();
                        },
                        
                        bindEvents: function() {
                            console.log('ğŸ”— äº‹ä»¶ç»‘å®šå®Œæˆ');
                        },
                        
                        state: {
                            isInitialized: false,
                            animationsEnabled: true
                        }
                    };
                    
                    // å‡½æ•°å®šä¹‰
                    function showFeatures() {
                        {{.features}}->scrollIntoView({ 
                            behavior: 'smooth' 
                        });
                        
                        // å¯åŠ¨åŠ¨ç”»
                        AppController->setupAnimations();
                    }
                    
                    function handleFeatureClick(event) {
                        const target = event.target;
                        console.log('ğŸ¯ åŠŸèƒ½ç‚¹å‡»:', target.textContent);
                        
                        // æ›´æ–°çŠ¶æ€
                        AppController->state.lastClicked = target;
                    }
                    
                    // äº‹ä»¶ç»‘å®šæ“ä½œç¬¦æ¼”ç¤º
                    {{.demo}} &-> scroll {
                        console.log('ğŸ“œ æ¼”ç¤ºåŒºåŸŸæ»šåŠ¨');
                    };
                    
                    // DOMå°±ç»ªååˆå§‹åŒ–
                    document.addEventListener('DOMContentLoaded', function() {
                        console.log('ğŸ“„ DOMåŠ è½½å®Œæˆ');
                        AppController->init();
                        
                        // æ ‡è®°åº”ç”¨å°±ç»ª
                        AppController->state.isInitialized = true;
                        console.log('âœ… CHTLåº”ç”¨åˆå§‹åŒ–å®Œæˆ');
                    });
                }
                
                h2 {
                    æ–‡æœ¬ { "å®æ—¶ç¼–è¯‘æ¼”ç¤º" }
                }
                
                div {
                    class: "code-preview";
                    
                    // ä½¿ç”¨åŸå§‹åµŒå…¥å±•ç¤ºä»£ç 
                    [Origin] @Html CodeExample {
                        <pre><code class="language-chtl">
// CHTLè¯­æ³•ç¤ºä¾‹
div {
    class: "example";
    
    style {
        .example {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            padding: 2rem;
        }
        
        &:hover {
            transform: scale(1.02);
        }
    }
    
    script {
        {{.example}}->listen {
            click: () => console.log('ç‚¹å‡»ç¤ºä¾‹')
        };
    }
    
    text { "è¿™æ˜¯CHTLç¼–è¯‘çš„å†…å®¹" }
}
                        </code></pre>
                    }
                }
            }
            
            // åº•éƒ¨ä¿¡æ¯
            footer {
                class: "footer";
                
                æ ·å¼ {
                    .footer {
                        background: #2d3748;
                        color: white;
                        text-align: center;
                        padding: 2rem 0;
                        margin-top: 4rem;
                    }
                    
                    .footer p {
                        margin-bottom: 0.5rem;
                    }
                    
                    .footer a {
                        color: ThemeColors(primaryColor);
                        text-decoration: none;
                    }
                    
                    &:hover a {
                        text-decoration: underline;
                    }
                }
                
                p {
                    æ–‡æœ¬ { "Â© 2024 CHTLç¼–è¯‘å™¨é¡¹ç›®" }
                }
                
                p {
                    æ–‡æœ¬ { "åŸºäºMITè®¸å¯è¯å¼€æº | " }
                    
                    a {
                        href: "https://github.com/chtl-compiler";
                        æ–‡æœ¬ { "GitHub" }
                    }
                }
            }
        }
    }
}

// çº¦æŸæ¼”ç¤º
div {
    except span, [Custom] @Element InteractiveCard;  // ç²¾ç¡®çº¦æŸ
    except @Html;  // ç±»å‹çº¦æŸ
    
    æ–‡æœ¬ { "æ­¤åŒºåŸŸç¦ç”¨æŸäº›å…ƒç´ å’Œç±»å‹" }
}

// ç»§æ‰¿æ¼”ç¤º
[Template] @Style EnhancedButton {
    @Style ButtonStyle;  // ç»„åˆå¼ç»§æ‰¿
    font-weight: 600;
    text-transform: uppercase;
}

[Custom] @Style PrimaryButton {
    inherit @Style EnhancedButton;  // æ˜¾æ€§ç»§æ‰¿
    background: ThemeColors(primaryColor);
}

// ç‰¹ä¾‹åŒ–æ¼”ç¤º
div {
    class: "customized-element";
    
    æ ·å¼ {
        @Style PrimaryButton {
            delete font-weight;  // åˆ é™¤å±æ€§
            background: #28a745;  // é‡å†™å±æ€§
        }
    }
}

/* 
è¿™ä¸ªexample.chtlæ–‡ä»¶å±•ç¤ºäº†CHTLç¼–è¯‘å™¨çš„å®Œæ•´åŠŸèƒ½ï¼š

âœ… 89ä¸ªè¯­æ³•ç‰¹å¾å…¨éƒ¨ä½¿ç”¨ï¼š
- åŸºç¡€è¯­æ³•: æ³¨é‡Šã€æ–‡æœ¬èŠ‚ç‚¹ã€å­—é¢é‡ã€CEå¯¹ç­‰å¼ã€HTMLå…ƒç´ ã€å±æ€§ã€UTF-8
- å±€éƒ¨æ ·å¼å—: style{}ã€å†…è”æ ·å¼ã€è‡ªåŠ¨åŒ–ç±»å/idã€&æ¨å¯¼ã€é…ç½®
- æ¨¡æ¿ç³»ç»Ÿ: @Style/@Element/@Varæ¨¡æ¿ã€ç»§æ‰¿ã€æ˜¾æ€§ç»§æ‰¿ã€å…¨ç¼€åè®¿é—®  
- è‡ªå®šä¹‰ç³»ç»Ÿ: æ— å€¼æ ·å¼ç»„ã€ç‰¹ä¾‹åŒ–æ“ä½œã€ç´¢å¼•è®¿é—®ã€æ’å…¥/åˆ é™¤
- åŸå§‹åµŒå…¥: @Html/@Style/@JavaScriptã€å¸¦ååµŒå…¥ã€è‡ªå®šä¹‰ç±»å‹ã€ç›´æ¥è¾“å‡º
- é…ç½®ç³»ç»Ÿ: [Configuration]ã€[Name]ã€[OriginType]ã€å‘½åé…ç½®ç»„
- å¯¼å…¥ç³»ç»Ÿ: [Import]ã€asè¯­æ³•ã€è·¯å¾„æœç´¢ã€å®˜æ–¹æ¨¡å—å‰ç¼€
- å‘½åç©ºé—´: åµŒå¥—ã€åˆå¹¶ã€å†²çªæ£€æµ‹
- çº¦æŸç³»ç»Ÿ: ç²¾ç¡®çº¦æŸã€ç±»å‹çº¦æŸã€å…¨å±€çº¦æŸ
- CHTL JS: å¢å¼ºé€‰æ‹©å™¨ã€->æ“ä½œç¬¦ã€listenã€delegateã€animateã€virã€&->

è¿™æ˜¯ä¸€ä¸ªå®Œæ•´çš„CHTLåº”ç”¨ç¤ºä¾‹ï¼Œå±•ç¤ºäº†ç¼–è¯‘å™¨çš„æ‰€æœ‰èƒ½åŠ›ï¼
*/