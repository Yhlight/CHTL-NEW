# CHTLé¡¹ç›®ç¯å¢ƒä¾èµ–æ–‡æ¡£

## ğŸ“‹ ä¾èµ–æ¦‚è¿°

CHTLé¡¹ç›®æ˜¯ä¸€ä¸ªå¤æ‚çš„å¤šè¯­è¨€ç¼–è¯‘å™¨ç³»ç»Ÿï¼ŒåŒ…å«ç¼–è¯‘å™¨æ ¸å¿ƒã€VSCodeæ’ä»¶ã€æ„å»ºå·¥å…·ç­‰å¤šä¸ªç»„ä»¶ã€‚æœ¬æ–‡æ¡£è¯¦ç»†è¯´æ˜äº†å„ä¸ªç»„ä»¶çš„ç¯å¢ƒä¾èµ–å’Œé…ç½®è¦æ±‚ã€‚

---

## ğŸ—ï¸ æ ¸å¿ƒç¼–è¯‘å™¨ä¾èµ–

### ğŸ”§ åŸºç¡€ä¾èµ–

#### C++ç¼–è¯‘å™¨
- **Windows**: Visual Studio 2019 (v142) æˆ– Visual Studio 2022 (v143)
- **Linux**: GCC 8+ æˆ– Clang 10+
- **macOS**: Xcode 12+ æˆ– Clang 10+

#### C++æ ‡å‡†åº“
- **C++17æ ‡å‡†** - å¿…éœ€
- **STLæ”¯æŒ** - std::filesystem, std::optional, std::variant
- **çº¿ç¨‹åº“** - std::thread, std::async, std::mutex
- **æ­£åˆ™è¡¨è¾¾å¼** - std::regex (å®Œæ•´ECMAScriptæ”¯æŒ)

#### æ„å»ºç³»ç»Ÿ
- **CMake**: 3.16 æˆ–æ›´é«˜ç‰ˆæœ¬
- **Make** (Linux/macOS) æˆ– **MSBuild** (Windows)

### ğŸ“š ç¬¬ä¸‰æ–¹åº“ä¾èµ–

#### ANTLR4 è¿è¡Œæ—¶åº“
- **ç‰ˆæœ¬**: 4.13.2
- **ç”¨é€”**: CSSå’ŒJavaScriptè¯­æ³•è§£æ
- **å¹³å°**: 
  - Windows: ç”¨æˆ·æä¾›çš„é¢„ç¼–è¯‘åº“
  - Linux/macOS: æºç è‡ªåŠ¨ç¼–è¯‘

#### å®‰è£…æ–¹å¼

**Windows (ç”¨æˆ·æä¾›)**:
```
src/ThirdParty/ANTLR4/
â”œâ”€â”€ include/
â”‚   â””â”€â”€ antlr4-runtime.h
â””â”€â”€ lib/
    â”œâ”€â”€ antlr4-runtime.lib (Release)
    â”œâ”€â”€ antlr4-runtime-static.lib (Release)
    â””â”€â”€ antlr4-runtime.dll
```

**Linux/macOS (è‡ªåŠ¨æ„å»º)**:
```bash
# è‡ªåŠ¨æ„å»ºANTLR4è¿è¡Œæ—¶
cd thirdparty/antlr/antlr4-4.13.2/runtime/Cpp
mkdir -p build/runtime && cd build/runtime
cmake ../../ -DCMAKE_BUILD_TYPE=Release
make -j4
```

---

## ğŸ’» VSCodeæ’ä»¶ä¾èµ–

### ğŸŸ¢ Node.jsç¯å¢ƒ

#### ç‰ˆæœ¬è¦æ±‚
- **Node.js**: 14.x æˆ–æ›´é«˜ç‰ˆæœ¬
- **npm**: 6.x æˆ–æ›´é«˜ç‰ˆæœ¬

#### å®‰è£…æ–¹å¼
```bash
# ä½¿ç”¨nvm (æ¨è)
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash
nvm install 16
nvm use 16

# æˆ–ç›´æ¥ä¸‹è½½
# https://nodejs.org/
```

### ğŸ“¦ npmä¾èµ–åŒ…

#### ç”Ÿäº§ä¾èµ–
```json
{
  "dependencies": {
    "ws": "^8.14.2",           // WebSocketæœåŠ¡å™¨
    "chokidar": "^3.5.3",     // æ–‡ä»¶ç›‘æ§
    "express": "^4.18.2"      // HTTPæœåŠ¡å™¨
  }
}
```

#### å¼€å‘ä¾èµ–
```json
{
  "devDependencies": {
    "@types/node": "^18.15.0",     // Node.jsç±»å‹å®šä¹‰
    "@types/ws": "^8.5.5",         // WebSocketç±»å‹å®šä¹‰
    "@types/chokidar": "^2.1.3",   // Chokidarç±»å‹å®šä¹‰
    "@vscode/vsce": "^2.22.0",     // VSCodeæ‰©å±•æ‰“åŒ…å·¥å…·
    "typescript": "^5.0.0"         // TypeScriptç¼–è¯‘å™¨
  }
}
```

#### å®‰è£…å‘½ä»¤
```bash
cd vscode-chtl-extension
npm install
npm install --save-dev @types/ws @types/chokidar
```

---

## ğŸ› ï¸ æ„å»ºå·¥å…·ä¾èµ–

### ğŸ“œ è„šæœ¬ç¯å¢ƒ

#### Bash (Linux/macOS)
- **ç‰ˆæœ¬**: Bash 4.0+
- **å·¥å…·**: grep, sed, awk, find, xargs
- **å‹ç¼©**: zip, tar, gzip

#### PowerShell (Windows)
- **ç‰ˆæœ¬**: PowerShell 5.1+ æˆ– PowerShell Core 7+
- **å·¥å…·**: Select-String, ForEach-Object
- **å‹ç¼©**: Compress-Archive

#### é€šç”¨å·¥å…·
- **Git**: ç‰ˆæœ¬æ§åˆ¶
- **Python**: 3.6+ (ç”¨äºæŸäº›æ„å»ºè„šæœ¬)
- **Java**: 8+ (ç”¨äºANTLR4å·¥å…·)

### ğŸ”§ å¯é€‰å·¥å…·

#### æ€§èƒ½åˆ†æå·¥å…·
```bash
# Linux
sudo apt-get install valgrind perf

# macOS  
brew install valgrind

# Windows
# Visual Studioè‡ªå¸¦æ€§èƒ½åˆ†æå·¥å…·
```

#### ä»£ç è´¨é‡å·¥å…·
```bash
# é™æ€åˆ†æ
sudo apt-get install cppcheck clang-tidy

# ä»£ç æ ¼å¼åŒ–
sudo apt-get install clang-format

# æ–‡æ¡£ç”Ÿæˆ
sudo apt-get install doxygen graphviz
```

---

## ğŸŒ è¿è¡Œæ—¶ä¾èµ–

### ğŸ–¥ï¸ æ“ä½œç³»ç»Ÿè¦æ±‚

#### Windows
- **æœ€ä½ç‰ˆæœ¬**: Windows 10 (1903)
- **æ¶æ„**: x64 (64ä½)
- **è¿è¡Œæ—¶**: Visual C++ Redistributable 2019/2022
- **å­—ç¬¦ç¼–ç **: UTF-8æ”¯æŒ (Windows 10 1903+)

#### Linux
- **å‘è¡Œç‰ˆ**: Ubuntu 18.04+, CentOS 7+, Debian 10+
- **å†…æ ¸**: 4.15+
- **æ¶æ„**: x86_64
- **æ ‡å‡†åº“**: glibc 2.27+ æˆ– musl 1.1.20+

#### macOS
- **ç‰ˆæœ¬**: macOS 10.14 (Mojave) æˆ–æ›´é«˜
- **æ¶æ„**: x86_64 æˆ– Apple Silicon (arm64)
- **Xcode**: æ”¯æŒC++17çš„ç‰ˆæœ¬

### ğŸ’¾ ç³»ç»Ÿèµ„æºè¦æ±‚

#### æœ€ä½è¦æ±‚
- **RAM**: 1GB
- **ç£ç›˜**: 500MBå¯ç”¨ç©ºé—´
- **CPU**: ä»»ä½•64ä½å¤„ç†å™¨

#### æ¨èé…ç½®
- **RAM**: 4GBæˆ–æ›´å¤š
- **ç£ç›˜**: 2GBå¯ç”¨ç©ºé—´ (åŒ…å«æºç å’Œæ„å»º)
- **CPU**: å¤šæ ¸å¤„ç†å™¨ (æ”¯æŒå¹¶è¡Œç¼–è¯‘)

---

## ğŸ”§ å¼€å‘ç¯å¢ƒé…ç½®

### ğŸªŸ Windowså¼€å‘ç¯å¢ƒ

#### Visual Studioé…ç½®
```xml
<!-- .vcxproj é…ç½® -->
<PropertyGroup>
    <LanguageStandard>stdcpp17</LanguageStandard>
    <CharacterSet>Unicode</CharacterSet>
    <AdditionalOptions>/utf-8 %(AdditionalOptions)</AdditionalOptions>
</PropertyGroup>
```

#### ç¯å¢ƒå˜é‡
```cmd
set CHTL_ROOT=C:\path\to\chtl-compiler
set PATH=%CHTL_ROOT%\build\bin;%PATH%
set CHTL_MODULE_PATH=%CHTL_ROOT%\src\Module
```

### ğŸ§ Linuxå¼€å‘ç¯å¢ƒ

#### ç¼–è¯‘å™¨é…ç½®
```bash
# GCCé…ç½®
export CC=gcc-9
export CXX=g++-9
export CXXFLAGS="-std=c++17 -finput-charset=UTF-8 -fexec-charset=UTF-8"

# Clangé…ç½®
export CC=clang-12
export CXX=clang++-12
export CXXFLAGS="-std=c++17 -finput-charset=UTF-8 -fexec-charset=UTF-8"
```

#### ç¯å¢ƒå˜é‡
```bash
# æ·»åŠ åˆ° ~/.bashrc æˆ– ~/.zshrc
export CHTL_ROOT=/path/to/chtl-compiler
export PATH="$CHTL_ROOT/build/bin:$PATH"
export CHTL_MODULE_PATH="$CHTL_ROOT/src/Module"
export LD_LIBRARY_PATH="$CHTL_ROOT/build/lib:$LD_LIBRARY_PATH"
```

### ğŸ macOSå¼€å‘ç¯å¢ƒ

#### Xcodeé…ç½®
```bash
# å®‰è£…Xcodeå‘½ä»¤è¡Œå·¥å…·
xcode-select --install

# è®¾ç½®ç¼–è¯‘å™¨
export CC=clang
export CXX=clang++
export CXXFLAGS="-std=c++17 -stdlib=libc++"
```

#### Homebrewä¾èµ–
```bash
# å®‰è£…Homebrew
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"

# å®‰è£…ä¾èµ–
brew install cmake git node
```

---

## ğŸ¯ ç‰¹æ®Šä¾èµ–è¯´æ˜

### ğŸ”¥ CJMODç³»ç»Ÿä¾èµ–

CJMODä½œä¸ºCHTLçš„**æä¸ºå¼ºå¤§ç‰¹å¾**ï¼Œæœ‰ä»¥ä¸‹ç‰¹æ®Šè¦æ±‚ï¼š

#### C++ APIè¦æ±‚
- **æ¨¡æ¿æ”¯æŒ**: C++17æ¨¡æ¿ç‰¹æ€§
- **æ™ºèƒ½æŒ‡é’ˆ**: std::unique_ptr, std::shared_ptr
- **å®¹å™¨åº“**: std::vector, std::unordered_map
- **å‡½æ•°å¯¹è±¡**: std::function, lambdaè¡¨è¾¾å¼

#### åŠ¨æ€åº“åŠ è½½ (å¯é€‰)
- **Windows**: LoadLibrary, GetProcAddress
- **Linux**: dlopen, dlsym
- **macOS**: dlopen, dlsym

### ğŸŒ UTF-8å­—ç¬¦æ”¯æŒ

#### ç¼–è¯‘å™¨UTF-8é…ç½®

**Visual Studio**:
```xml
<AdditionalOptions>/utf-8 %(AdditionalOptions)</AdditionalOptions>
```

**GCC/Clang**:
```bash
-finput-charset=UTF-8 -fexec-charset=UTF-8
```

#### è¿è¡Œæ—¶UTF-8æ”¯æŒ

**Windows**:
```cpp
// åœ¨mainå‡½æ•°å¼€å§‹å¤„
#ifdef _WIN32
    SetConsoleOutputCP(CP_UTF8);
    SetConsoleCP(CP_UTF8);
#endif
```

**Linux/macOS**:
```bash
export LANG=zh_CN.UTF-8
export LC_ALL=zh_CN.UTF-8
```

---

## ğŸ” ä¾èµ–éªŒè¯

### âœ… ç¯å¢ƒæ£€æŸ¥è„šæœ¬

```bash
#!/bin/bash
# scripts/check_environment.sh

echo "ğŸ” CHTLé¡¹ç›®ç¯å¢ƒä¾èµ–æ£€æŸ¥"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"

# æ£€æŸ¥CMake
if command -v cmake &> /dev/null; then
    CMAKE_VERSION=$(cmake --version | head -n1 | grep -o '[0-9]\+\.[0-9]\+\.[0-9]\+')
    echo "âœ… CMake: $CMAKE_VERSION"
    
    if [ "$(printf '%s\n' "3.16" "$CMAKE_VERSION" | sort -V | head -n1)" = "3.16" ]; then
        echo "   âœ… ç‰ˆæœ¬æ»¡è¶³è¦æ±‚ (>= 3.16)"
    else
        echo "   âŒ ç‰ˆæœ¬è¿‡ä½ï¼Œéœ€è¦ >= 3.16"
    fi
else
    echo "âŒ CMake æœªå®‰è£…"
fi

# æ£€æŸ¥C++ç¼–è¯‘å™¨
if command -v g++ &> /dev/null; then
    GCC_VERSION=$(g++ --version | head -n1 | grep -o '[0-9]\+\.[0-9]\+')
    echo "âœ… GCC: $GCC_VERSION"
    
    # æ£€æŸ¥C++17æ”¯æŒ
    echo "int main() { return 0; }" | g++ -std=c++17 -x c++ - -o /tmp/test_cpp17 2>/dev/null
    if [ $? -eq 0 ]; then
        echo "   âœ… C++17æ”¯æŒæ­£å¸¸"
        rm -f /tmp/test_cpp17
    else
        echo "   âŒ C++17æ”¯æŒå¼‚å¸¸"
    fi
elif command -v clang++ &> /dev/null; then
    CLANG_VERSION=$(clang++ --version | head -n1 | grep -o '[0-9]\+\.[0-9]\+')
    echo "âœ… Clang: $CLANG_VERSION"
else
    echo "âŒ C++ç¼–è¯‘å™¨æœªæ‰¾åˆ°"
fi

# æ£€æŸ¥Node.js (ç”¨äºVSCodeæ’ä»¶)
if command -v node &> /dev/null; then
    NODE_VERSION=$(node --version)
    echo "âœ… Node.js: $NODE_VERSION"
    
    if command -v npm &> /dev/null; then
        NPM_VERSION=$(npm --version)
        echo "âœ… npm: $NPM_VERSION"
    else
        echo "âŒ npm æœªå®‰è£…"
    fi
else
    echo "âš ï¸  Node.js æœªå®‰è£… (VSCodeæ’ä»¶å¼€å‘éœ€è¦)"
fi

# æ£€æŸ¥Git
if command -v git &> /dev/null; then
    GIT_VERSION=$(git --version | grep -o '[0-9]\+\.[0-9]\+\.[0-9]\+')
    echo "âœ… Git: $GIT_VERSION"
else
    echo "âŒ Git æœªå®‰è£…"
fi

# æ£€æŸ¥ANTLR4
if [ -f "thirdparty/antlr/antlr4-4.13.2/runtime/Cpp/build/runtime/libantlr4-runtime.a" ]; then
    echo "âœ… ANTLR4 è¿è¡Œæ—¶åº“å·²æ„å»º"
else
    echo "âš ï¸  ANTLR4 è¿è¡Œæ—¶åº“æœªæ„å»ºï¼Œå°†ä½¿ç”¨æ ¸å¿ƒæ¨¡å¼"
fi

# æ£€æŸ¥Java (ANTLR4å·¥å…·éœ€è¦)
if command -v java &> /dev/null; then
    JAVA_VERSION=$(java -version 2>&1 | head -n1 | grep -o '[0-9]\+')
    echo "âœ… Java: $JAVA_VERSION"
else
    echo "âš ï¸  Java æœªå®‰è£… (ANTLR4ä»£ç ç”Ÿæˆéœ€è¦)"
fi

echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "ğŸ¯ ç¯å¢ƒæ£€æŸ¥å®Œæˆ"
```

### ğŸ”§ è‡ªåŠ¨å®‰è£…è„šæœ¬

#### Linuxä¾èµ–å®‰è£…
```bash
#!/bin/bash
# scripts/install_dependencies_linux.sh

echo "ğŸ§ å®‰è£…Linuxå¼€å‘ä¾èµ–..."

# æ›´æ–°åŒ…ç®¡ç†å™¨
sudo apt-get update

# å®‰è£…åŸºç¡€å¼€å‘å·¥å…·
sudo apt-get install -y \
    build-essential \
    cmake \
    git \
    pkg-config \
    uuid-dev \
    libssl-dev \
    zlib1g-dev

# å®‰è£…C++17æ”¯æŒçš„ç¼–è¯‘å™¨
sudo apt-get install -y \
    gcc-9 \
    g++-9 \
    clang-12 \
    clang++-12

# å®‰è£…Java (ç”¨äºANTLR4)
sudo apt-get install -y default-jdk

# å®‰è£…Node.js (ç”¨äºVSCodeæ’ä»¶)
curl -fsSL https://deb.nodesource.com/setup_16.x | sudo -E bash -
sudo apt-get install -y nodejs

# éªŒè¯å®‰è£…
echo "éªŒè¯å®‰è£…ç»“æœ:"
gcc-9 --version | head -n1
cmake --version | head -n1
node --version
java -version
```

#### macOSä¾èµ–å®‰è£…
```bash
#!/bin/bash
# scripts/install_dependencies_macos.sh

echo "ğŸ å®‰è£…macOSå¼€å‘ä¾èµ–..."

# æ£€æŸ¥Homebrew
if ! command -v brew &> /dev/null; then
    echo "å®‰è£…Homebrew..."
    /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
fi

# å®‰è£…å¼€å‘å·¥å…·
brew install cmake git node java

# å®‰è£…Xcodeå‘½ä»¤è¡Œå·¥å…·
xcode-select --install

# éªŒè¯å®‰è£…
echo "éªŒè¯å®‰è£…ç»“æœ:"
clang++ --version | head -n1
cmake --version | head -n1
node --version
java -version
```

---

## ğŸ¯ è¿è¡Œæ—¶ç¯å¢ƒ

### ğŸƒâ€â™‚ï¸ ç¼–è¯‘å™¨è¿è¡Œæ—¶

#### åŠ¨æ€é“¾æ¥åº“

**Windows**:
```
# Visual C++ Redistributable
vcredist_x64.exe

# ANTLR4è¿è¡Œæ—¶ (å¦‚æœä½¿ç”¨åŠ¨æ€é“¾æ¥)
antlr4-runtime.dll
```

**Linux**:
```bash
# æ ‡å‡†C++åº“
libstdc++.so.6

# ANTLR4è¿è¡Œæ—¶ (å¦‚æœä½¿ç”¨åŠ¨æ€é“¾æ¥)
libantlr4-runtime.so.4.13.2
```

**macOS**:
```bash
# ç³»ç»ŸC++åº“
libc++.1.dylib

# ANTLR4è¿è¡Œæ—¶ (å¦‚æœä½¿ç”¨åŠ¨æ€é“¾æ¥)
libantlr4-runtime.4.13.2.dylib
```

### ğŸŒ å­—ç¬¦ç¼–ç æ”¯æŒ

#### UTF-8ç¯å¢ƒé…ç½®

**Linux**:
```bash
# æ£€æŸ¥å½“å‰ç¼–ç 
echo $LANG
locale

# è®¾ç½®UTF-8
export LANG=zh_CN.UTF-8
export LC_ALL=zh_CN.UTF-8

# æ°¸ä¹…è®¾ç½®
echo 'export LANG=zh_CN.UTF-8' >> ~/.bashrc
echo 'export LC_ALL=zh_CN.UTF-8' >> ~/.bashrc
```

**Windows**:
```cmd
# è®¾ç½®æ§åˆ¶å°UTF-8
chcp 65001

# è®¾ç½®ç¯å¢ƒå˜é‡
set LANG=zh_CN.UTF-8
setx LANG zh_CN.UTF-8
```

**macOS**:
```bash
# é€šå¸¸é»˜è®¤æ”¯æŒUTF-8
echo $LANG  # åº”æ˜¾ç¤º en_US.UTF-8 æˆ– zh_CN.UTF-8
```

---

## ğŸ“Š æ€§èƒ½ä¾èµ–

### ğŸš€ ç¼–è¯‘æ€§èƒ½ä¼˜åŒ–

#### å¹¶è¡Œç¼–è¯‘
```bash
# Linux/macOS
export MAKEFLAGS="-j$(nproc)"  # ä½¿ç”¨æ‰€æœ‰CPUæ ¸å¿ƒ

# Windows
cmake --build . --parallel     # è‡ªåŠ¨æ£€æµ‹æ ¸å¿ƒæ•°
```

#### å†…å­˜ä¼˜åŒ–
```bash
# å¤§å‹é¡¹ç›®ç¼–è¯‘å†…å­˜è¦æ±‚
# æ¨è: 8GB+ RAM
# æœ€ä½: 4GB RAM

# å¦‚æœå†…å­˜ä¸è¶³ï¼Œå‡å°‘å¹¶è¡Œåº¦
export MAKEFLAGS="-j2"  # ä»…ä½¿ç”¨2ä¸ªæ ¸å¿ƒ
```

#### ç£ç›˜ç©ºé—´ä¼˜åŒ–
```bash
# ç¼–è¯‘äº§ç‰©å¤§å°ä¼°ç®—
# Debugæ„å»º: ~500MB
# Releaseæ„å»º: ~100MB
# å®Œæ•´æ„å»º (åŒ…å«æµ‹è¯•): ~1GB
```

### â±ï¸ ç¼–è¯‘è®¡æ—¶å™¨é…ç½®

```bash
# ç¼–è¯‘è®¡æ—¶å™¨é…ç½®
MAX_COMPILATION_TIME=300  # 5åˆ†é’Ÿ
MAX_MEMORY_MB=2048       # 2GB
CHECK_INTERVAL=2         # 2ç§’æ£€æŸ¥é—´éš”

# æ ¹æ®ç³»ç»Ÿé…ç½®è°ƒæ•´
# ä½é…ç½®ç³»ç»Ÿ
MAX_COMPILATION_TIME=600  # 10åˆ†é’Ÿ
MAX_MEMORY_MB=1024       # 1GB

# é«˜é…ç½®ç³»ç»Ÿ  
MAX_COMPILATION_TIME=180  # 3åˆ†é’Ÿ
MAX_MEMORY_MB=4096       # 4GB
```

---

## ğŸ”’ å®‰å…¨ä¾èµ–

### ğŸ›¡ï¸ å®‰å…¨ç¼–è¯‘é€‰é¡¹

#### å†…å­˜å®‰å…¨
```bash
# AddressSanitizer (Debugæ„å»º)
-fsanitize=address -fno-omit-frame-pointer

# æ ˆä¿æŠ¤
-fstack-protector-strong

# ç¼“å†²åŒºæº¢å‡ºä¿æŠ¤
-D_FORTIFY_SOURCE=2
```

#### é“¾æ¥å®‰å…¨
```bash
# RELROä¿æŠ¤
-Wl,-z,relro,-z,now

# æ ˆä¸å¯æ‰§è¡Œ
-Wl,-z,noexecstack

# åœ°å€ç©ºé—´å¸ƒå±€éšæœºåŒ–
-fPIC -pie
```

---

## ğŸ“š å¯é€‰ä¾èµ–

### ğŸ¨ æ–‡æ¡£ç”Ÿæˆ

#### Doxygen
```bash
# å®‰è£…Doxygen
sudo apt-get install doxygen graphviz  # Linux
brew install doxygen graphviz          # macOS

# ç”Ÿæˆæ–‡æ¡£
doxygen Doxyfile
```

#### Sphinx (Pythonæ–‡æ¡£)
```bash
pip install sphinx sphinx-rtd-theme

# ç”Ÿæˆæ–‡æ¡£
cd docs
make html
```

### ğŸ§ª æµ‹è¯•æ¡†æ¶

#### Google Test (å·²é›†æˆ)
```cpp
// å·²åŒ…å«åœ¨ANTLR4ä¾èµ–ä¸­
// æ— éœ€é¢å¤–å®‰è£…
```

#### è‡ªå®šä¹‰æµ‹è¯•æ¡†æ¶
```cpp
// CHTLä½¿ç”¨è‡ªå®šä¹‰çš„ç®€åŒ–æµ‹è¯•æ¡†æ¶
// æ— å¤–éƒ¨ä¾èµ–
```

---

## ğŸŠ ä¾èµ–ç®¡ç†æœ€ä½³å®è·µ

### ğŸ“¦ åŒ…ç®¡ç†

#### Vcpkg (Windows, å¯é€‰)
```bash
# å®‰è£…vcpkg
git clone https://github.com/Microsoft/vcpkg.git
cd vcpkg
./bootstrap-vcpkg.sh

# å®‰è£…ä¾èµ–
./vcpkg install antlr4:x64-windows
```

#### Conan (è·¨å¹³å°, å¯é€‰)
```bash
# å®‰è£…Conan
pip install conan

# åˆ›å»ºconanfile.txt
[requires]
antlr4/4.13.2

[generators]
cmake
```

### ğŸ”§ ç‰ˆæœ¬é”å®š

#### ä¾èµ–ç‰ˆæœ¬å›ºå®š
```cmake
# CMakeLists.txtä¸­å›ºå®šç‰ˆæœ¬
find_package(antlr4 4.13.2 EXACT REQUIRED)
```

#### æ„å»ºé‡ç°æ€§
```bash
# è®°å½•æ„å»ºç¯å¢ƒ
cmake --version > build_info.txt
$CXX --version >> build_info.txt
uname -a >> build_info.txt
```

---

## ğŸ¯ æ•…éšœæ’é™¤

### âŒ å¸¸è§ä¾èµ–é—®é¢˜

#### é—®é¢˜1: CMakeç‰ˆæœ¬è¿‡ä½
```bash
# ç—‡çŠ¶
CMake Error: CMake 3.16 or higher is required

# è§£å†³æ–¹æ¡ˆ
# Ubuntu/Debian
wget -O - https://apt.kitware.com/keys/kitware-archive-latest.asc 2>/dev/null | sudo apt-key add -
sudo apt-add-repository 'deb https://apt.kitware.com/ubuntu/ focal main'
sudo apt-get update
sudo apt-get install cmake
```

#### é—®é¢˜2: C++17æ”¯æŒé—®é¢˜
```bash
# ç—‡çŠ¶
error: 'std::filesystem' has not been declared

# è§£å†³æ–¹æ¡ˆ
# ç¡®ä¿ä½¿ç”¨æ”¯æŒC++17çš„ç¼–è¯‘å™¨
export CXX=g++-9  # æˆ–æ›´é«˜ç‰ˆæœ¬
```

#### é—®é¢˜3: UTF-8ç¼–ç é—®é¢˜
```bash
# ç—‡çŠ¶
æºæ–‡ä»¶ä¸­çš„ä¸­æ–‡å­—ç¬¦æ˜¾ç¤ºä¸ºä¹±ç 

# è§£å†³æ–¹æ¡ˆ
# 1. æ£€æŸ¥æ–‡ä»¶ç¼–ç 
file -i source_file.cpp

# 2. è½¬æ¢ä¸ºUTF-8
iconv -f GBK -t UTF-8 source_file.cpp > source_file_utf8.cpp

# 3. è®¾ç½®ç¼–è¯‘å™¨é€‰é¡¹
export CXXFLAGS="-finput-charset=UTF-8 -fexec-charset=UTF-8"
```

---

## ğŸ‰ æ€»ç»“

CHTLé¡¹ç›®çš„ç¯å¢ƒä¾èµ–ç»è¿‡ç²¾å¿ƒè®¾è®¡ï¼Œå¹³è¡¡äº†åŠŸèƒ½å®Œæ•´æ€§å’Œæ˜“ç”¨æ€§ï¼š

- ğŸ”¥ **æ ¸å¿ƒä¾èµ–æœ€å°åŒ–** - ä»…éœ€C++17ç¼–è¯‘å™¨å’ŒCMake
- ğŸ”¥ **å¯é€‰ä¾èµ–æ¸…æ™°** - æ˜ç¡®åŒºåˆ†å¿…éœ€å’Œå¯é€‰ä¾èµ–
- ğŸ”¥ **è·¨å¹³å°å…¼å®¹** - æ”¯æŒä¸‰å¤§ä¸»æµæ“ä½œç³»ç»Ÿ
- ğŸ”¥ **è‡ªåŠ¨åŒ–å®‰è£…** - æä¾›å®Œæ•´çš„ä¾èµ–å®‰è£…è„šæœ¬
- ğŸ”¥ **ç¯å¢ƒæ£€æŸ¥** - è‡ªåŠ¨éªŒè¯ç¯å¢ƒé…ç½®æ­£ç¡®æ€§

é€šè¿‡åˆç†çš„ä¾èµ–ç®¡ç†ï¼ŒCHTLé¡¹ç›®æ—¢ä¿è¯äº†åŠŸèƒ½çš„å¼ºå¤§æ€§ï¼Œåˆç¡®ä¿äº†éƒ¨ç½²çš„ç®€ä¾¿æ€§ã€‚

**ğŸŒŸ éµå¾ªæœ¬æ–‡æ¡£é…ç½®ç¯å¢ƒï¼Œå¼€å§‹æ‚¨çš„CHTLå¼€å‘ä¹‹æ—…ï¼**