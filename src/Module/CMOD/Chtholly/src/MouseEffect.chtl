;; 珂朵莉鼠标特效
;; 严格按照CHTL语法文档要求实现

[Custom] @Element ChthollyMouseEffect
{
    div
    {
        class: chtholly-mouse-effect;
        
        style
        {
            .chtholly-mouse-effect
            {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                pointer-events: none;
                z-index: 9999;
                overflow: hidden;
            }
            
            .mouse-particle
            {
                position: absolute;
                width: 8px;
                height: 8px;
                background: radial-gradient(circle, @Var ChthollyColors.primary-red 0%, @Var ChthollyColors.emerald-green 100%);
                border-radius: 50%;
                pointer-events: none;
                animation: mouseParticle 1s ease-out forwards;
            }
            
            @keyframes mouseParticle
            {
                0% {
                    transform: scale(1);
                    opacity: 1;
                }
                100% {
                    transform: scale(0);
                    opacity: 0;
                }
            }
        }
        
        script
        {
            ;; 珂朵莉鼠标特效逻辑
            console.log('🖱️ 珂朵莉的鼠标特效启动');
            
            const effectContainer = {{.chtholly-mouse-effect}};
            let particleCount = 0;
            const maxParticles = 50;
            
            ;; 鼠标移动事件
            document &-> mousemove {
                const x = event.clientX;
                const y = event.clientY;
                
                ;; 创建粒子特效
                if (particleCount < maxParticles) {
                    const particle = document.createElement('div');
                    particle.className = 'mouse-particle';
                    particle.style.left = (x - 4) + 'px';
                    particle.style.top = (y - 4) + 'px';
                    
                    ;; 随机颜色变化
                    const colors = ['#FF6B6B', '#4ECDC4', '#FFB6C1', '#98FB98'];
                    const randomColor = colors[Math.floor(Math.random() * colors.length)];
                    particle.style.background = `radial-gradient(circle, ${randomColor}, transparent)`;
                    
                    effectContainer.appendChild(particle);
                    particleCount++;
                    
                    ;; 粒子消失后清理
                    setTimeout(() => {
                        if (particle.parentElement) {
                            particle.remove();
                            particleCount--;
                        }
                    }, 1000);
                }
            };
            
            ;; 鼠标点击特效
            document &-> click {
                const x = event.clientX;
                const y = event.clientY;
                
                ;; 创建点击波纹
                const ripple = document.createElement('div');
                ripple.style.cssText = `
                    position: fixed;
                    left: ${x - 25}px;
                    top: ${y - 25}px;
                    width: 50px;
                    height: 50px;
                    border: 2px solid #FF6B6B;
                    border-radius: 50%;
                    pointer-events: none;
                    z-index: 10000;
                    animation: clickRipple 0.6s ease-out forwards;
                `;
                
                document.body.appendChild(ripple);
                
                setTimeout(() => {
                    ripple.remove();
                }, 600);
                
                console.log('💖 珂朵莉鼠标点击特效');
            };
            
            ;; 添加点击波纹动画
            if (!document.getElementById('chthollyClickRippleStyle')) {
                const style = document.createElement('style');
                style.id = 'chthollyClickRippleStyle';
                style.textContent = `
                    @keyframes clickRipple {
                        0% { transform: scale(0); opacity: 1; }
                        100% { transform: scale(4); opacity: 0; }
                    }
                `;
                document.head.appendChild(style);
            }
            
            ;; 导出控制接口
            window.ChthollyMouse = {
                enable: () => {
                    console.log('🖱️ 珂朵莉鼠标特效已启用');
                },
                disable: () => {
                    effectContainer.innerHTML = '';
                    console.log('🖱️ 珂朵莉鼠标特效已禁用');
                }
            };
        }
    }
}