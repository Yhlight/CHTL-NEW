// CJMODå¢å¼ºè¯­æ³•æ¼”ç¤º
// å±•ç¤ºImport CJMODåå¯ç”¨çš„å¼ºå¤§æ‰©å±•åŠŸèƒ½
// ä¸¥æ ¼æŒ‰ç…§CJMOD.mdå’Œå®Œå–„é€‰æ‹©å™¨è‡ªåŠ¨åŒ–ä¸å¼•ç”¨è§„åˆ™.ini

[Import] @CJmod from "enhanced_math"

[Configuration]
{
    // é€‰æ‹©å™¨è‡ªåŠ¨åŒ–é…ç½®
    DISABLE_STYLE_AUTO_ADD_CLASS = false;
    DISABLE_STYLE_AUTO_ADD_ID = false;
    DISABLE_SCRIPT_AUTO_ADD_CLASS = true;
    DISABLE_SCRIPT_AUTO_ADD_ID = true;
    ENABLE_CONTEXT_DEDUCTION = true;
}

html
{
    head
    {
        title
        {
            text
            {
                CJMODå¢å¼ºè¯­æ³•æ¼”ç¤º
            }
        }
    }
    
    body
    {
        div
        {
            id: math-container;
            class: enhanced-math;
            
            text
            {
                CJMODå¼ºå¤§åŠŸèƒ½æ¼”ç¤º
            }
            
            // å±€éƒ¨è„šæœ¬ä½¿ç”¨CJMODæ‰©å±•çš„è¯­æ³•
            script
            {
                // ä½¿ç”¨CJMOD APIåˆ›å»ºçš„è¯­æ³•ï¼š$ ** $
                // è¿™é‡Œä¼šè¢«CJMODçš„åŒæŒ‡é’ˆæ‰«ææ³•æˆ–å‰ç½®æˆªå–æ³•å¤„ç†
                let result1 = 3 ** 4;  // CJMODä¼šå°† ** è½¬æ¢ä¸º pow(3, 4)
                
                // ä½¿ç”¨CJMODåˆ›å»ºçš„CHTL JSå‡½æ•°
                printMyLove({url: "https://chtl.example.com", mode: "auto"});
                
                // å¤©ç„¶æ”¯æŒvirè™šå¯¹è±¡
                vir mathResult = printMyLove({url: "https://math.example.com", mode: "calculate"});
                
                // CJMODæ‰©å±•çš„é€‰æ‹©å™¨åŠŸèƒ½
                {{.enhanced-math}} -> click {
                    console.log('CJMODå¢å¼ºé€‰æ‹©å™¨ç‚¹å‡»äº‹ä»¶');
                    console.log('è®¡ç®—ç»“æœ:', result1);
                }
                
                // ä½¿ç”¨CJMODçš„å ä½ç¬¦è¯­æ³•
                function calculate() {
                    // $!_ å¿…é¡»å ä½ç¬¦ï¼Œ$?_ å¯é€‰å ä½ç¬¦
                    let base = $!_;  // å¿…é¡»å‚æ•°
                    let exponent = $?_ || 2;  // å¯é€‰å‚æ•°ï¼Œé»˜è®¤2
                    
                    return pow(base, exponent);
                }
            }
            
            style
            {
                // å±€éƒ¨æ ·å¼ä¼šè‡ªåŠ¨æ·»åŠ ç±»é€‰æ‹©å™¨
                background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
                padding: 30px;
                border-radius: 15px;
                box-shadow: 0 10px 30px rgba(0,0,0,0.2);
                
                .enhanced-math {
                    color: white;
                    text-align: center;
                    font-size: 18px;
                    font-weight: bold;
                }
                
                // & å¼•ç”¨é€‰æ‹©å™¨ä¼˜å…ˆé€‰æ‹©class
                & {
                    transition: all 0.3s ease;
                }
                
                &:hover {
                    transform: translateY(-5px);
                    box-shadow: 0 15px 40px rgba(0,0,0,0.3);
                }
            }
        }
        
        div
        {
            class: cjmod-demo;
            
            text
            {
                CJMOD APIåŠŸèƒ½å±•ç¤º
            }
            
            script
            {
                // æ¼”ç¤ºCJMODçš„è¯­æ³•æ£€æµ‹åŠŸèƒ½
                if (Syntax.isObject("{name: 'CHTL', version: '1.0'}")) {
                    console.log('âœ… CJMODæ­£ç¡®è¯†åˆ«JSå¯¹è±¡');
                }
                
                if (Syntax.isFunction("function test() { return true; }")) {
                    console.log('âœ… CJMODæ­£ç¡®è¯†åˆ«JSå‡½æ•°');
                }
                
                if (Syntax.isArray("[1, 2, 3, 4]")) {
                    console.log('âœ… CJMODæ­£ç¡®è¯†åˆ«JSæ•°ç»„');
                }
                
                if (Syntax.isCHTLJSFunction("testFunc {param: $!, optional: $?}")) {
                    console.log('âœ… CJMODæ­£ç¡®è¯†åˆ«CHTL JSå‡½æ•°');
                }
                
                // CJMODæ‰©å±•çš„äº‹ä»¶å¤„ç†
                {{.cjmod-demo}} -> click {
                    console.log('ğŸ”¥ CJMODå¢å¼ºçš„äº‹ä»¶å¤„ç†');
                    
                    // ä½¿ç”¨CJMODåˆ›å»ºçš„è¯­æ³•
                    let calculation = calculate(5, 3);  // ä½¿ç”¨ä¸Šé¢å®šä¹‰çš„calculateå‡½æ•°
                    console.log('CJMODè®¡ç®—ç»“æœ:', calculation);
                }
            }
            
            style
            {
                background: #f8f9fa;
                border: 2px solid #007bff;
                border-radius: 10px;
                padding: 25px;
                margin: 20px 0;
                cursor: pointer;
                
                .cjmod-demo {
                    color: #007bff;
                    font-weight: bold;
                    text-align: center;
                }
            }
        }
    }
}